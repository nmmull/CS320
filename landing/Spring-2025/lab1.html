<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>lab1 (Spring-2025.lab1)</title><meta charset="utf-8"/><link rel="stylesheet" href="../odoc.support/odoc.css"/><meta name="generator" content="odoc 3.0.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="index.html">Up</a> – <a href="../index.html">Index</a> &#x00BB; <a href="index.html">Spring-2025</a> &#x00BB; lab1</nav><header class="odoc-preamble"><h1 id="lab-1:-installation-party"><a href="#lab-1:-installation-party" class="anchor"></a>Lab 1: Installation Party</h1><p>There are quite a few things we need to set up in order to work on the assignments and projects in this course. The purpose of this lab it to walk through the installation process.</p><p><b>Important.</b> If you're running Windows, then you are <em>required</em> to <a href="https://learn.microsoft.com/en-us/windows/wsl/setup/environment">Set up a WSL development environment</a>. If you're an advanced Windows user (and a bit brave) you can try a native install, but we will not help you troubleshoot.</p></header><div class="odoc-tocs"><nav class="odoc-toc odoc-local-toc"><ul><li><a href="#course-repository">Course Repository</a><ul><li><a href="#mirroring-the-course-repository">Mirroring the Course Repository</a></li><li><a href="#syncing-with-the-course-repository">Syncing with the Course Repository</a></li></ul></li><li><a href="#ocaml">OCaml</a><ul><li><a href="#installing-packages">Installing Packages</a></li><li><a href="#setting-up-vscode">Setting up VSCode</a></li></ul></li><li><a href="#assignment-workflow">Assignment Workflow</a></li><li><a href="#hello-dune">Hello Dune</a></li></ul></nav></div><div class="odoc-content"><h2 id="course-repository"><a href="#course-repository" class="anchor"></a>Course Repository</h2><p>We host out <a href="https://github.com/BU-CS320/cs320-spring-2025">course repository</a> on GitHub. You'll need to host a private mirror of this repository, in which you'll include your solutions to assignments and projects. <em>This means you'll need a GitHub account.</em> We'll assume familiarity with Git; see the <a href="https://git-scm.com/docs/gittutorial">git tutorial</a> if you need a refresher.</p><p>When we release any course material (e.g., lecture slides, starter code) it will be made available in the course repository, which you'll then be able to merge into your private mirror.</p><h3 id="mirroring-the-course-repository"><a href="#mirroring-the-course-repository" class="anchor"></a>Mirroring the Course Repository</h3><ol><li><p><b>Create a GitHub account</b> if you haven't already. You can use your personal GitHub account if you have one.</p><p><i>Note.</i> Some students have in the past had issues with setting using a GitHub account attached to their BU email address, so I would generally recommend using a personal account.</p></li><li><b>Create a personal access token.</b> This collection of instructions assumes that you're using Git with HTTPS authentication. If you want to use SSH then you can skip this step, but we will not help you troubleshoot. Follow the GitHub Docs instructions on <a href="https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens#creating-a-personal-access-token-classic">Creating a personal access token</a>.</li><li><b>Create a private repository</b> called <code>cs320-spring-2025-private</code>. This repository <em>must be private</em> because it will contain your solutions to assignments and projects. If you've never created a repository on GitHub, follow the GitHub Docs tutorial on <a href="https://docs.github.com/en/repositories/creating-and-managing-repositories/creating-a-new-repository">Creating a new repository</a>.</li><li><p><b>Mirror-push the course repository.</b></p><ol><li><p>Open a terminal and <code>cd</code> into the directory where you want to put your coursework for CS320, e.g., I would type something like:</p><pre class="language-text"><code>cd ~/Developer/Repositories</code></pre></li><li><p>Clone the course repository:</p><pre class="language-text"><code>git clone https://github.com/BU-CS320/cs320-spring-2025.git</code></pre></li><li><p>Mirror-push the course repository into your private repository:</p><pre class="language-text"><code>git -C ./cs320-spring-2025 push --mirror https://github.com/USERNAME/cs320-spring-2025-private.git</code></pre><p>replacing <code>USERNAME</code> with your GitHub username.</p></li><li><p>Clone your private repository:</p><pre class="language-text"><code>git clone https://github.com/USERNAME/cs320-spring-2025-private.git</code></pre></li><li><p>Add the course repository as a remote for your private repository:</p><pre class="language-text"><code>git -C ./cs320-spring-2025-private remote add upstream https://github.com/BU-CS320/cs320-spring-2025.git</code></pre></li><li><p>Remove the clone of the course repository:</p><pre class="language-text"><code>rm -rf cs320-spring-2025</code></pre></li></ol></li></ol><p>At this point you should have a directory called <code>cs320-spring-2025-private</code>, in which you'll put your solutions to assignments and projects.</p><h3 id="syncing-with-the-course-repository"><a href="#syncing-with-the-course-repository" class="anchor"></a>Syncing with the Course Repository</h3><p>The import of the above setup is that, when materials are added to the course repository, you can easily merge them into your private repository. <b>You should get in the habit of doing this frequently.</b></p><p><code>cd</code> to the directory for your private repository. Make sure to first commit any uncommitted changes. Then run the following commands.</p><pre class="language-text"><code>git fetch upstream
git merge upstream/main main
git push</code></pre><p>This will merge the updates to the course repository into your private repository both locally and on GitHub. You should almost never need to resolve a merge after doing this, but if you do, take a look at the GitHub Docs instructions on <a href="https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/addressing-merge-conflicts">Addressing merge conflicts</a> for a refresher on how to do this.</p><h2 id="ocaml"><a href="#ocaml" class="anchor"></a>OCaml</h2><p>Next you need to set up your machine to be able to compile and run OCaml programs.</p><h3 id="installing-packages"><a href="#installing-packages" class="anchor"></a>Installing Packages</h3><ol><li><p><b>Install opam.</b> <a href="https://opam.ocaml.org">opam</a> is a package manager for OCaml. Follow the opam documentation instructions on <a href="https://opam.ocaml.org/doc/Install.html">How to install opam</a> for your OS. In short, use one of the following commands:</p><pre class="language-text"><code># Homebrew (macOS)
brew install opam

# MacPort (macOS)
port install opam

# Ubuntu
apt install opam

# Debian
apt-get install opam

# Arch Linux
pacman -S opam</code></pre><p>and follow the associated instructions, e.g., make sure to run</p><pre class="language-text"><code>opam init</code></pre><p>after opam is installed.</p></li><li><p><b>Create a switch.</b> A switch keeps track of a particular set of packages you've installed. We'll make a global switch intended to be used for this course.</p><pre class="language-text"><code>opam switch create cs320-s25 5.2.1
opam switch cs320-s25
eval $(opam env)</code></pre><p><i>Note.</i> You'll need to run <code>eval $(opam env)</code> every time you open a fresh terminal.</p></li><li><p><b>Install the packages for this course.</b> You can ignore all the warnings associated with installing the course standard library. We include <a href="https://nmmull.github.io/CS320/landing/Spring-2025/Specifications/Stdlib320/index.html">documentation</a> for this library on the course webpage. We'll grade most assignments under the assumption that you only have access to this library.</p><pre class="language-text"><code>opam update
opam install dune utop ounit2 menhir ocaml-lsp-server
opam install stdlib320/.</code></pre></li></ol><h3 id="setting-up-vscode"><a href="#setting-up-vscode" class="anchor"></a>Setting up VSCode</h3><p>If you plan on using VSCode, you should also install the <a href="https://marketplace.visualstudio.com/items?itemName=ocamllabs.ocaml-platform">OCaml Platform</a> from the Visual Studio Marketplace. The link in the previous sentence includes instructions on how to use OCaml with VSCode.</p><p><i>Note.</i> Setting up VSCode is optional. We will, for example, not always use VSCode in live-coding demos. We'll do our best to troubleshoot any issues you run into, but it won't be a priority.</p><h2 id="assignment-workflow"><a href="#assignment-workflow" class="anchor"></a>Assignment Workflow</h2><p>Once everything is set up, working on an assignment will go roughly as follows.</p><ol><li>Sync with the course repository to get access to the assignment (see the instructions above).</li><li>Sync the environment with the course switch <code>eval $(opam env)</code>.</li><li><p>Fill in your solutions, make sure to commit your changes frequently.</p><p><i>Note.</i> You'll often have to create your own files which satisfy the specification of the assignment. You can verify that you've set everything up correctly if <code>dune build</code> doesn't show any errors when run in <code>assigns/assignX</code>.</p></li><li><p>From within the assignment <code>lib</code> directory, run <code>dune build</code> frequently to check your code.</p><p><i>Note.</i> Per the instructions on using OCaml on VSCode, you can also use</p><pre class="language-text"><code>dune build --watch --terminal-persistence=clear-on-rebuild</code></pre><p>to rebuild every time you make a change to a file. You may want to have this going in the built-in terminal of VSCode as you work.</p></li><li><p>When you get close to completing the assignment, from within the assignment directory, run <code>dune test</code> to test your code against a small test suite we've provided. This collection of tests will include some (but not all) tests used for grading.</p><p><i>Note.</i> The tests come in the form of <a href="https://cs3110.github.io/textbook/chapters/basics/expressions.html?highlight=assert#assertions">assertions</a>. This means that <b>if you fail an assertion, the following assertions will not be tested</b>. If you can comment out assertions in order to avoid testing them.</p></li><li><i>(Optional)</i> Add your own assertions to the file <code>tests/test_assignX.ml</code>.</li><li>Push your work to your private repository and submit your assignment. On Gradescope, you'll be prompted to choose a repository and a commit to submit. After submitting, you should see a message which says that your assignment was accepted along with information about some (but not all) of the tests that were run.</li></ol><h2 id="hello-dune"><a href="#hello-dune" class="anchor"></a>Hello Dune</h2><p><a href="https://dune.build">Dune</a> is a build tool for OCaml which we'll be using for the entirety of this course. To finish off the lab, we'll create a simple project using dune. This will primarily be in order to verify that everything is set up correctly.</p><ol><li><p><b>Initialize a project.</b> Open up a terminal and <code>cd</code> to a place where you want to create a dummy project. Then run</p><pre class="language-ocaml"><code>eval $(opam env)
dune init project hello_dune</code></pre><p>This will create a directory called <code>hello_dune</code>, a skeleton project with the following file structure:</p><pre class="language-text"><code>.
├── bin
│   ├── dune
│   └── main.ml
├── dune-project
├── hello_dune.opam
├── lib
│   └── dune
└── test
    ├── dune
    └── test_hello_dune.ml</code></pre><p>You can ignore most of these files for now. We'll only update the file <code>bin/main.ml</code>.</p></li><li><p><b>Verify things work.</b> <code>cd</code> into the project you just made and run:</p><pre class="language-text"><code>dune build</code></pre><p>You should see no output (you may see a progress bar). Building a project verifies that there are no type errors in your code.</p><p>Next, run:</p><pre class="language-text"><code>dune clean</code></pre><p>Building a project creates a lot of auxiliary files, and <code>dune clean</code> just deletes them all.</p><p><i>Tip.</i> If you find that your project is not building and you think it should, run <code>dune clean</code> and then <code>dune build</code> again, particularly if you change a <code>dune</code> file or the <code>dune-project</code> file (we'll talk more about this later).</p></li><li><p><b>Write a program.</b> Open the file <code>bin/main.ml</code> in your favorite editor. You should see the following:</p><pre class="language-ocaml"><code>let () = print_endline &quot;Hello, World!&quot;</code></pre><p>Like with Python, there is no special &quot;main&quot; function for OCaml. Everything in <code>main.ml</code> (or any file that you've told dune is executable) is run.</p><p>Replace the contents of <code>bin/main.ml</code> with</p><pre class="language-ocaml"><code>let hello_message = &quot;TODO&quot;
let () = print_endline hello_message</code></pre><p>making <code>TODO</code> into a phrase of your choosing. Here we are making the message printed by the program into a variable. Finally, go back to the terminal and type:</p><pre class="language-text"><code>dune exec hello_dune</code></pre><p>You should see the message that you put in your program.</p></li><li><p><b>Use Utop.</b> Utop is an interface for OCaml's toplevel, like Python's REPL. It's a standalone program, you can type in your terminal:</p><pre class="language-ocaml"><code>utop</code></pre><p>and from there you can type in any OCaml expression followed by two semicolons <code>;;</code>, which Utop will evaluate, e.g.:</p><pre class="language-ocaml"><code>utop # 2 + 2;;
- : int = 4</code></pre><p>When you're done, type <code>#quit</code> to leave Utop.</p><p>It's will be more common for us to use Utop via Dune so that it runs in a <em>project aware</em> way. Let's start by creating a file called <code>lib/hello_dune.ml</code> and in it write the line:</p><pre class="language-ocaml"><code>let welcome = &quot;TODO&quot;</code></pre><p>replacing <code>TODO</code> with a welcome message of your choosing. Then in your terminal (within the directory <code>hello_dune</code>) type:</p><pre class="language-ocaml"><code>dune utop</code></pre><p>This will open Utop, but it will <em>also</em> make available any code that you've written in the <code>lib</code> directory. You can type:</p><pre class="language-ocaml"><code>Hello_dune.welcome;;</code></pre><p>within Utop, and Utop will evaluate it to be the message you wrote. Note the capital 'H' here. <code>Hello_dune</code> is a <i>module</i> which is defined in the file <code>lib/hello_dune.ml</code> and in which the value <code>welcome</code> is defined.</p><p>The last thing we'll do is use this value in our executable program. Go back to <code>bin/main.ml</code> and replace its content with:</p><pre class="language-ocaml"><code>let () = print_endline Hello_dune.welcome</code></pre><p>The point: the code in <code>bin/main.ml</code> can refer to the <code>Hello_dune</code> module. This is how most of our dune projects will be structured; we'll put library code in the <code>lib</code> directory and executable code in the <code>bin</code> directory (hence, the names).</p></li></ol><p>And that's it for now, you've created a dune project. For most assignments, the dune project will be given to you. As we get further into the course, we'll look at more of the files that were generated above.</p></div></body></html>
