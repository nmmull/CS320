<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>interp2 (Spring-2025.interp2)</title><meta charset="utf-8"/><link rel="stylesheet" href="../odoc.support/odoc.css"/><meta name="generator" content="odoc 3.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><link rel="stylesheet" href="../odoc.support/katex.min.css"/><script src="../odoc.support/katex.min.js"></script><script>
//<![CDATA[

          document.addEventListener("DOMContentLoaded", function () {
            var elements = Array.from(document.getElementsByClassName("odoc-katex-math"));
            for (var i = 0; i < elements.length; i++) {
              var el = elements[i];
              var content = el.textContent;
              var new_el = document.createElement("span");
              new_el.setAttribute("class", "odoc-katex-math-rendered");
              var display = el.classList.contains("display");
              katex.render(content, new_el, { throwOnError: false, displayMode: display });
              el.replaceWith(new_el);
            }
          });
        
//]]>
</script></head><body class="odoc"><nav class="odoc-nav"><a href="index.html">Up</a> â€“ <a href="../index.html">Index</a> &#x00BB; <a href="index.html">Spring-2025</a> &#x00BB; interp2</nav><header class="odoc-preamble"><h1 id="mini-project-2:-the-environment-model"><a href="#mini-project-2:-the-environment-model" class="anchor"></a>Mini-Project 2: The Environment Model</h1><p>For mini-project 2, you'll be building <i>another</i> interpreter, this time for a small <b>typed</b> subset of OCaml. This will mean building a type checker <i>and</i> an evaluator, along with what's called a <i>desugaring</i> function.</p><p>This mini-project is due on <b>Thursday 4/17 by 8:00PM</b>. <i>It cannot be dropped.</i> This is the landing page for the project, it doesn't contain any information about the project specification. The details of the project are given in the file <code>assigns/interp2/spec.pdf</code>.</p></header><div class="odoc-tocs"><nav class="odoc-toc odoc-local-toc"><ul><li><a href="#one-week-check-in">One-Week Check-in</a></li><li><a href="#written-problems">Written Problems</a><ul><li><a href="#desugaring">Desugaring</a></li><li><a href="#closures">Closures</a></li><li><a href="#semantic-derivation">Semantic Derivation</a></li></ul></li></ul></nav></div><div class="odoc-content"><h2 id="one-week-check-in"><a href="#one-week-check-in" class="anchor"></a>One-Week Check-in</h2><p>For the one-week check-in, you must submit:</p><ul><li>An implementation of <code>desugar</code>, as detailed in the mini-project specification. You should be able to leave your implementations of the other functions partial or empty <i>as long as your code builds</i>.</li><li>Solutions to the written problems below.</li></ul><p><i>Note.</i> We will <b>not</b> re-test parts of the mini-project from the one-week check-in. To recieve full credit on the mini-project, you must successfully submit both the one-week check-in and the complete mini-project.</p><h2 id="written-problems"><a href="#written-problems" class="anchor"></a>Written Problems</h2><h3 id="desugaring"><a href="#desugaring" class="anchor"></a>Desugaring</h3><pre class="language-ocaml"><code>let foo (x : int) (y : int) : int =
  let bar (z : bool) : bool = z || x = y in
  bar true

let baz (x : unit) : int = foo 1 2

let biz : int = baz ()</code></pre><p>Desugar the above program according to the desugaring rules given in the mini-project 2 specification (please use reasonable indentation to make it easier on our graders).</p><h3 id="closures"><a href="#closures" class="anchor"></a>Closures</h3><pre class="language-ocaml"><code>let x : int = 2 + 3 in
let g : int -&gt; int = fun (x : int) -&gt; x + x in
let f : int -&gt; int = fun (y : int) -&gt; g x in
let x : int -&gt; int = g in
f</code></pre><p>Determine the closure which the above expression evaluates to according to the semantic rules given in the mini-project 2 specification.</p><h3 id="semantic-derivation"><a href="#semantic-derivation" class="anchor"></a>Semantic Derivation</h3><pre class="language-ocaml"><code>let rec f : bool -&gt; bool = fun (x : bool) -&gt; x || f true in f false</code></pre><p>Let <code class="odoc-katex-math">e</code> be the expression above. In the derivation of the judgment <code class="odoc-katex-math">\langle \ \varnothing \ , \ e \ \rangle \ \Downarrow \top</code> (according to the semantics rules given in the mini-project 2 specification) there are <i>two</i> places at which you need to derive a judgment of the form <code class="odoc-katex-math">\langle \ \mathcal E \ , \ \texttt{x || f true} \ \rangle \Downarrow \top</code> for some dynamic environment <code class="odoc-katex-math">\mathcal E</code>. Write down what that environment is in each of the two cases. To be clear, you don't need to write down the entire derivation of <code class="odoc-katex-math">\langle \ \varnothing \ , \ e \ \rangle \ \Downarrow \top</code>. You just need to write two judgments of the form:</p><div><pre class="odoc-katex-math display">\begin{align*}
\langle \ \mathcal E_1 \ , \ \texttt{x || f true} \ \rangle
&amp;\Downarrow \top \\
\langle \ \mathcal E_2 \ , \ \texttt{x || f true} \ \rangle
&amp;\Downarrow \top
\end{align*}
</pre></div><p>Both of which are derived <i>within</i> a derivation of <code class="odoc-katex-math">\langle \ \varnothing \ , \ e \ \rangle \ \Downarrow \top</code>.</p></div></body></html>
